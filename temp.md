# 红黑二叉树的5个性质
1. 树中每个结点的颜色不是红的，就是黑的。
2. 根结点的颜色是黑的。
3. 所有nil的叶子结点的颜色是黑的。
4. 如果此结点是红的，那么它的两个孩子结点全部都是黑的。
5. 对于每个结点，从该结点到该结点的所有子孙结点的所有路径上包含有相同数目的黑结点。

黑高度：从该结点到其子孙结点中包含的黑结点数，用bh(x)表示。nil的黑高度为0。

# 红黑树的旋转
## 左旋
1. 需要进行左旋的子树的根结点   x
2. 找到该子树的根结点的右子树   y=x->right
3. 将右子树y的左孩子(y->left)移动至子树x的右孩子处(x->right)    x->right=y->left
4. 如果子树x的右子树不是nil，需要重新连接右子树的父结点(双亲结点)为x    x->right->p=x
5. 设置右子树y的父结点(双亲结点)为子树x的父结点 y->p=x->p
6. 设置y的父结点同y的连接有2种情况：
    * 原来子树x结点本身就是整颗树的根结点T，则T指向右子树y  T->root=y
    * 根据右子树y中关键字同其父节点关键字的值的大小，判断y的父节点是左孩子还是右孩子    y->p->left=y  or  y->p->right=y
7. 将x结点连接给y结点的左孩子处     y->left=x
8. 设置x的双亲结点为y   x->p=y
## 右旋
1. 需要进行右旋的子树的根结点   x
2. 找到该子树的根结点的左子树   y=x->left
3. 将左子树y的右孩子(y->left)移动至子树x的左孩子处(x->left)     x->left=y->right
4. 如果子树x的左子树不是nil，需要重新连接左子树的父结点为x
x->left->p=x
5. 设置左子树y的父节点为子树x的父节点 y->p=x->p
6. 设置y的父节点同y的连接有2种情况：
    * 原来子树x的结点本身就是整颗树的根结点T，则T指向左子树y T->root=y
    * 根据左子树y中关键字同其父节点关键字的值的大小，判断y的父节点是左孩子还是右孩子    y->p->left=y  or y->p->right=y
7. 将x结点连接给y结点的右孩子处     y->right=x
8. 设置x的双亲结点为y   x->p=y

# 红黑树中插入新结点
## 插入结点步骤
1. 由于红黑树本身是一颗二叉查找树，在插入新结点时，完全按照二叉查找树插入结点的方法，找到新结点插入的位置。
2. 将新插入的结点初始化，颜色设置为红色后插入到指定位置。(不会破坏第5条性质)
3. 由于插入新的结点，可能会破坏红黑树的第4条性质，此时需要调整二叉查找树，通过选择以及修改树中结点的颜色，使其重新成为红黑树。
## 插入结点情况
1. 插入位置为整颗树的树根。处理办法：只需将插入结点的颜色改为黑色。
2. 插入位置的双亲结点的颜色为黑色。处理办法：不需要做任何操作。新插入结点不会破坏红黑树的性质。
3. 插入位置的双亲结点的颜色为红色。插入结点和双亲结点的颜色都为红色，破坏了红黑树的第4条性质，此时需要结合其父节点和祖父结点的另一个孩子结点(叔叔结点)的状态分3种情况讨论：
    * 当前结点的父节点是红色，且“叔叔结点”也是红色。破坏了红黑树的第4条性质。解决方案：将父节点颜色改为黑色，叔叔结点颜色改为黑色，祖父结点改为红色。将祖父结点当做当前结点，继续判断。
    * 当前结点的父节点是红色，“叔叔结点”为黑色，且当前结点是父节点的右孩子。解决方案：将父节点作为当前结点做左旋操作。
    * 当前结点的父节点是红色，“叔叔结点”为黑色，且当前结点是父节点的左孩子。解决方案：将父节点改为黑色，祖父结点改为红色，从父节点处进行右旋处理。

# 红黑树中删除结点
## 删除结点步骤
1. 将红黑树按照二叉查找树删除结点的方法删除指定结点。
2. 重新调整删除结点后的树，使之重新成为红黑树。
## 删除结点情况
1. 当该删除结点本身是叶子结点，则可以直接删除。
2. 当只有一个孩子结点，则直接让其孩子结点顶替该删除结点。
3. 当有两个孩子结点，则找到该结点的右子树中值最小的叶子结点来替换该结点，然后删除这个值最小的叶子结点。
## 删除结点时是否会破坏红黑树的性质
1. 如果删除结点的颜色为红色，则不会破坏。
2. 如果删除结点的颜色为黑色，则肯定会破坏红黑树的第5条性质，此时就需要对树进行调整。
    * 删除结点的兄弟结点颜色是红色。调整措施为：将兄弟结点颜色改为黑色，父亲结点改为红色，以父亲结点来进行左旋操作，同时更新删除结点的兄弟结点（左旋后兄弟结点发生了变化
    * 删除结点的兄弟结点及其孩子全部是黑色的。调整措施为：将删除结点的兄弟结点设为红色，同时设置删除结点的父结点标记为新的结点，继续判断。
    * 删除结点的兄弟结点是黑色，其左孩子是红色，右孩子是黑色。调整措施为：将兄弟结点设为红色，兄弟结点的左孩子结点设为黑色，以兄弟结点为准进行右旋操作，最终更新删除结点的兄弟结点。
    * 删除结点的兄弟结点是黑色，其右孩子是红色，左孩子是黑色。调整措施为：将删除结点的父结点的颜色赋值给其兄弟结点，然后再设置父结点颜色为黑色，兄弟结点的右孩子结点为黑色，根据其父结点做左旋操作，最后设置替换删除结点的结点为根结点。