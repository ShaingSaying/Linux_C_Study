>最近在学习大神同事hxw的代码设计，再次做一个总结。

# 共享内存哈希表原理与结构体设计

```c
/* 哈希节点 */
typedef struct hash_node_s hash_node_t;
struct hash_node_s
{
    unsigned int node_index;    /* 链表节点index */
};

/* 链表节点个数 */
typedef struct list_node_s list_node_t;
struct list_node_s
{
    unsigned int next;     /* 下一个节点index */
    unsigned int key;      /* key的index */
    unsigned int val;      /* val的index */
}

/* 静态内存哈希表头结构信息 */
typedef struct mem_hash_s mem_hash_t;
struct mem_hash_s
{
    unsigned int mem_size;      /* 内存总大小 */
    unsigned int hash_size;     /* 哈希节点个数 */
    unsigned int list_size;     /* 链表节点个数 */
    unsigned int key_size;      /* key大小 */
    unsigned int val_size;      /* val大小 */
    /* node_size = sizeof(list_node_t) + key_size + val_size */
    unsigned int node_size;     /* 链表节点大小 */
    unsigned int free_index;    /* 空闲的链表头节点index */

    unsigned int hash_head;     /* 哈希头节点index */
    unsigned int list_head;     /* 链表头节点index */
}

/* 迭代器 */
typedef struct mem_hash_iterator_s mem_hash_iterator_t;
struct mem_hash_iterator_s
{
    unsigned int hash_num;      /* 当前哈希节点 */
    unsigned int node_next;     /* 下一个链表节点 */
}
```